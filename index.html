<!-- Updated Duyuru Wordle v0.2 with daily random word, non-repeating for 3 months, version display -->
<!-- Duyuru Wordle v0.2 -->
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Duyuru Wordle</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fafafa; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; flex-direction: column; }
    h1 { margin-bottom: 0; }
    #versionTag { font-size: 14px; color: #555; }
    .board { display: grid; grid-template-rows: repeat(6, 1fr); gap: 10px; justify-items: center; width: 100%; }
    .row { display: grid; grid-template-columns: repeat(5, 60px); gap: 10px; }
    .cell { width: 60px; height: 60px; border: 2px solid #ccc; display: flex; justify-content: center; align-items: center; font-size: 32px; font-weight: bold; background: white; text-transform: uppercase; }
    .correct { background: #6aaa64; color: white; }
    .present { background: #c9b458; color: white; }
    .absent { background: #787c7e; color: white; }
    .keyboard { margin-top: 20px; text-align: center; width: 100%; max-width: 480px; padding: 0 10px; }
    .keyboard div { display: flex; justify-content: center; margin-bottom: 5px; }
    .key { padding: 10px 0; margin: 2px; min-width: 32px; flex: 1 1 auto; max-width: 48px; text-align: center; font-weight: bold; border-radius: 4px; border: none; background: #ddd; cursor: pointer; font-size: 16px; }
    .modal { display:none; position: fixed; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
    .modal-content { background:white; padding:20px; border-radius:8px; max-width:400px; width:90%; position:relative; text-align:center; }
    #modalClose { position:absolute; top:10px; right:15px; cursor:pointer; font-size:24px; }
    #copyButton { margin-top:15px; padding:8px 16px; border:none; background:#6aaa64; color:white; border-radius:4px; cursor:pointer; }
  </style>
</head>
<body>
  <h1>Duyuru Wordle <span id="versionTag">v0.2</span></h1>
  <div class="board" id="board"></div>
  <div class="keyboard" id="keyboard"></div>

  <!-- Modal -->
  <div id="resultModal" class="modal"><div class="modal-content"><span id="modalClose">&times;</span><div id="modalMessage"></div><pre id="modalEmojis"></pre><button id="copyButton">Kopyala</button></div></div>

<script>
const VERSION = "v0.2";
document.getElementById("versionTag").textContent = VERSION;

let WORD_LIST = [];
let WORD = null;
let currentRow = 0;
let currentCol = 0;
let guesses = [];

function normalizeTurkish(s){return s.replace(/i/g,'Ä°').replace(/Ä±/g,'I').replace(/ÅŸ/g,'Åž').replace(/Ã§/g,'Ã‡').replace(/Ã¶/g,'Ã–').replace(/Ã¼/g,'Ãœ').replace(/ÄŸ/g,'Äž').toUpperCase();}

fetch("words.json").then(r=>r.json()).then(list=>{WORD_LIST=list.map(x=>normalizeTurkish(x.trim()));WORD=getDailyWord();init();});

// Create board
tconst = document.getElementById("board"); for (let r=0;r<6;r++){let row=document.createElement("div");row.classList.add("row");for(let c=0;c<5;c++){let cell=document.createElement("div");cell.classList.add("cell");cell.id=`cell-${r}-${c}`;row.appendChild(cell);}board.appendChild(row);} 

// Keyboard
const KEYS=[["Q","W","E","R","T","Y","U","I","O","P","Äž","Ãœ"],["A","S","D","F","G","H","J","K","L","Åž","Ä°"],["ENTER","Z","X","C","V","B","N","M","Ã–","Ã‡","DEL"]];
const keyboard=document.getElementById("keyboard"); KEYS.forEach(row=>{let div=document.createElement("div");row.forEach(k=>{let b=document.createElement("button");b.textContent=k;b.classList.add("key");b.onclick=()=>handleKey(k);div.appendChild(b);});keyboard.appendChild(div);});

// DAILY RANDOM WORD â€” MUST NOT REPEAT FOR 90 DAYS
function getDailyWord(){ if(!WORD_LIST.length) return null;
  const today = new Date(); const d = today.toISOString().slice(0,10);

  let used = JSON.parse(localStorage.getItem("duyuruUsedWords") || "{}");

  // temizle â€” 90 gÃ¼nden eski olanlarÄ± sil
  for (let day in used){ if ((today - new Date(day)) / 86400000 > 90){ delete used[day]; }}

  localStorage.setItem("duyuruUsedWords", JSON.stringify(used));

  // bugÃ¼n iÃ§in kelime zaten seÃ§ilmiÅŸse onu dÃ¶ndÃ¼r
  if (used[d]) return used[d];

  // rastgele uygun kelime seÃ§elim (kullanÄ±lmamÄ±ÅŸ olanlardan)
  let pool = WORD_LIST.filter(w => !Object.values(used).includes(w));
  if (pool.length === 0) pool = WORD_LIST; // gÃ¼venlik

  const word = pool[Math.floor(Math.random() * pool.length)];
  used[d] = word;
  localStorage.setItem("duyuruUsedWords", JSON.stringify(used));
  return word;
}

function init(){ document.getElementById("modalClose").onclick=()=>document.getElementById("resultModal").style.display="none"; }

function handleKey(key){ key=normalizeTurkish(key); const valid="ABCÃ‡DEFGÄžHIÄ°JKLMNOÃ–PRSÅžTUÃœVYZX";
  if(key==="DEL") return deleteLetter(); if(key==="ENTER") return submitRow(); if(!valid.includes(key)) return;
  if(currentCol<5){ let cell=document.getElementById(`cell-${currentRow}-${currentCol}`); cell.textContent=key; currentCol++; }}

function deleteLetter(){ if(currentCol>0){ currentCol--; let cell=document.getElementById(`cell-${currentRow}-${currentCol}`); cell.textContent=""; }}

function submitRow(){ if(currentCol<5) return;
  let guess=""; for(let c=0;c<5;c++){ guess+=document.getElementById(`cell-${currentRow}-${c}`).textContent; }
  if(!WORD_LIST.includes(guess)){ alert("GeÃ§ersiz kelime!"); return; }
  const result = checkGuess(guess); result.forEach((r,c)=>document.getElementById(`cell-${currentRow}-${c}`).classList.add(r));
  guesses.push({guess,result});
  if(result.every(x=>x==="correct") || currentRow===5){ showResult(); return; }
  currentRow++; currentCol=0;
}

function checkGuess(g){ const r=Array(5).fill("absent"); const t=WORD.split(""); g=g.split("");
  for(let i=0;i<5;i++){ if(g[i]===t[i]){ r[i]="correct"; t[i]=null; }}
  for(let i=0;i<5;i++){ if(r[i]!=="correct" && t.includes(g[i])){ r[i]="present"; t[t.indexOf(g[i])] = null; }}
  return r;
}

function showResult(){ const modal=document.getElementById("resultModal"); const out=[];
  guesses.forEach(t=>{ out.push(t.result.map(x=>x==="correct"?"ðŸŸ©":x==="present"?"ðŸŸ§":"â¬›").join("")); });
  document.getElementById("modalMessage").textContent="BugÃ¼nÃ¼n sonucu:";
  document.getElementById("modalEmojis").textContent=out.join("
"); modal.style.display="flex";
  document.getElementById("copyButton").onclick=()=>navigator.clipboard.writeText(out.join("
"));
}
</script>
</body>
</html>

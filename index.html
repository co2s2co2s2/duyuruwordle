<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Duyuru Wordle 0.64</title>
    <style>
        :root {
            --color-correct: #6aaa64;
            --color-present: #c9b458;
            --color-absent: #787c7e;
            --color-border: #d3d6da;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            flex-direction: column;
            overflow: hidden;
        }

        /* ===== BOARD ===== */
        .board {
            display: grid;
            grid-template-rows: repeat(6, 1fr);
            gap: 5px;
            margin-bottom: 20px;
        }

        .row { display: grid; grid-template-columns: repeat(5, 62px); gap: 5px; }

        .cell {
            width: 62px;
            height: 62px;
            border: 2px solid var(--color-border);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: bold;
            background: white;
            text-transform: uppercase;
            transition: transform 0.1s ease;
            user-select: none;
        }

        /* Animasyonlar */
        .cell.pop { transform: scale(1.1); border-color: #878a8c; }
        
        .flip { animation: flip 0.6s ease forwards; }
        @keyframes flip {
            0% { transform: rotateX(0); }
            50% { transform: rotateX(90deg); }
            100% { transform: rotateX(0); }
        }

        .correct { background: var(--color-correct) !important; color: white; border-color: var(--color-correct); }
        .present { background: var(--color-present) !important; color: white; border-color: var(--color-present); }
        .absent  { background: var(--color-absent) !important; color: white; border-color: var(--color-absent); }

        /* ===== KEYBOARD ===== */
        .keyboard { width: 100%; max-width: 500px; padding: 0 8px; }
        .keyboard-row { display: flex; justify-content: center; margin-bottom: 8px; }
        .key {
            background: #d3d6da;
            border: 0;
            border-radius: 4px;
            margin: 2px;
            height: 58px;
            cursor: pointer;
            font-weight: bold;
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
        }
        .key.wide { flex: 1.5; }

        /* ===== MODAL ===== */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(255,255,255,0.8);
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        .modal-content {
            background: #ffffff;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 23px rgba(0,0,0,0.1);
            max-width: 350px;
        }

        /* PaylaÅŸ Butonu */
        #copyButton {
            background: var(--color-correct);
            color: white; border: none; padding: 15px 30px;
            border-radius: 8px; cursor: pointer; font-size: 1.1rem; font-weight: bold;
        }

        #devTag { 
            position: fixed; right: 10px; bottom: 10px; background: #ffea00; 
            padding: 5px 10px; border-radius: 5px; font-size: 12px; font-weight: bold;
            display: none; cursor: pointer;
        }

        /* Efekt KatmanÄ± */
        .effect-layer { position: fixed; inset: 0; pointer-events: none; z-index: 10; }
        .falling-emoji { position: absolute; top: -50px; animation: fall linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>

<h1>Duyuru Wordle v0.65</h1>

<div class="board" id="board"></div>
<div class="keyboard" id="keyboard"></div>

<div id="resultModal" class="modal">
    <div class="modal-content">
        <h2 id="modalTitle">SonuÃ§</h2>
        <pre id="modalEmojis" style="font-size: 1.5rem; margin: 20px 0;"></pre>
        <button id="copyButton">KOPYALA VE PAYLAÅž</button>
    </div>
</div>

<div id="devTag" onclick="disableDevMode()">DEV MODE (Kapatmak iÃ§in tÄ±kla)</div>
<div class="effect-layer" id="effectLayer"></div>

<script>
/* ================= AYARLAR ================= */
let WORD_LIST = [];
let TARGET_WORD = "";
let currentRow = 0;
let currentCol = 0;
let canInput = true;
let boardHistory = [];

// Dev Mode KontrolÃ¼
const DEV_MODE = localStorage.getItem("duyuruDevMode") === "true";
window.enableDevMode = () => { localStorage.setItem("duyuruDevMode", "true"); location.reload(); };
window.disableDevMode = () => { localStorage.removeItem("duyuruDevMode"); location.reload(); };

/* ================= OYUN BAÅžLATMA ================= */
async function loadGame() {
    try {
        const response = await fetch("words.json");
        const data = await response.json();
        WORD_LIST = data.map(w => normalizeTurkish(w));
        
        // GÃ¼nlÃ¼k Kelime SeÃ§imi
        const today = new Date().toISOString().slice(0, 10);
        let hash = 0;
        for (let i = 0; i < today.length; i++) {
            hash = ((hash << 5) - hash) + today.charCodeAt(i);
            hash |= 0;
        }
        TARGET_WORD = WORD_LIST[Math.abs(hash) % WORD_LIST.length];

        if (DEV_MODE) {
            console.log("Cevap:", TARGET_WORD);
            document.getElementById("devTag").style.display = "block";
        }

        createBoard();
        createKeyboard();
    } catch (e) {
        alert("Kelimeler yÃ¼klenemedi! words.json dosyasÄ±nÄ± kontrol edin.");
    }
}

function createBoard() {
    const board = document.getElementById("board");
    for (let r = 0; r < 6; r++) {
        const row = document.createElement("div");
        row.className = "row";
        for (let c = 0; c < 5; c++) {
            const cell = document.createElement("div");
            cell.className = "cell";
            cell.id = `c-${r}-${c}`;
            row.appendChild(cell);
        }
        board.appendChild(row);
    }
}

function createKeyboard() {
    const layout = [
        ["Q","W","E","R","T","Y","U","I","O","P","Äž","Ãœ"],
        ["A","S","D","F","G","H","J","K","L","Åž","Ä°"],
        ["ENTER","Z","X","C","V","B","N","M","Ã–","Ã‡","DEL"]
    ];
    const kb = document.getElementById("keyboard");
    layout.forEach(row => {
        const rowDiv = document.createElement("div");
        rowDiv.className = "keyboard-row";
        row.forEach(key => {
            const btn = document.createElement("button");
            btn.className = "key" + (key.length > 4 ? " wide" : "");
            btn.textContent = key;
            btn.onclick = () => handleKey(key);
            btn.setAttribute("data-key", normalizeTurkish(key));
            rowDiv.appendChild(btn);
        });
        kb.appendChild(rowDiv);
    });
}

/* ================= MANTIK ================= */
function normalizeTurkish(s) {
    return s.toUpperCase().replace(/Ä°/g, 'Ä°').replace(/I/g, 'I').replace(/Ä±/g, 'I').replace(/i/g, 'Ä°');
}

function handleKey(k) {
    if (!canInput) return;
    if (k === "ENTER") submitRow();
    else if (k === "DEL" || k === "BACKSPACE") {
        if (currentCol > 0) {
            currentCol--;
            const cell = document.getElementById(`c-${currentRow}-${currentCol}`);
            cell.textContent = "";
            cell.classList.remove("pop");
        }
    } else if (currentCol < 5 && k.length === 1) {
        const cell = document.getElementById(`c-${currentRow}-${currentCol}`);
        cell.textContent = normalizeTurkish(k);
        cell.classList.add("pop");
        currentCol++;
    }
}

async function submitRow() {
    if (currentCol < 5) return;
    
    const guessArr = [];
    for(let i=0; i<5; i++) guessArr.push(document.getElementById(`c-${currentRow}-${i}`).textContent);
    const guess = guessArr.join("");

    if (!WORD_LIST.includes(guess)) {
        shakeRow();
        return;
    }

    canInput = false;
    const result = checkGuess(guess);
    
    // Animasyonlu Renklendirme
    let emojiRow = "";
    for (let i = 0; i < 5; i++) {
        const cell = document.getElementById(`c-${currentRow}-${i}`);
        cell.classList.add("flip");
        
        await new Promise(r => setTimeout(r, 100)); // Harf harf dÃ¶nme
        
        const status = result[i];
        cell.classList.add(status);
        updateKeyColor(guess[i], status);
        
        emojiRow += (status === "correct" ? "ðŸŸ©" : status === "present" ? "ðŸŸ¨" : "â¬›");
    }
    boardHistory.push(emojiRow);

    if (guess === TARGET_WORD) {
        victory();
    } else if (currentRow === 5) {
        gameOver();
    } else {
        currentRow++;
        currentCol = 0;
        canInput = true;
    }
}

function checkGuess(guess) {
    const res = Array(5).fill("absent");
    const target = TARGET_WORD.split("");
    const g = guess.split("");

    for (let i = 0; i < 5; i++) {
        if (g[i] === target[i]) {
            res[i] = "correct";
            target[i] = null;
        }
    }
    for (let i = 0; i < 5; i++) {
        if (res[i] !== "correct" && target.includes(g[i])) {
            res[i] = "present";
            target[target.indexOf(g[i])] = null;
        }
    }
    return res;
}

function updateKeyColor(letter, status) {
    const btn = document.querySelector(`.key[data-key="${letter}"]`);
    if (!btn) return;
    if (status === "correct") {
        btn.className = "key correct";
    } else if (status === "present" && !btn.classList.contains("correct")) {
        btn.className = "key present";
    } else if (status === "absent" && !btn.classList.contains("correct") && !btn.classList.contains("present")) {
        btn.className = "key absent";
    }
}

/* ================= EFEKTLER ================= */
function victory() {
    spawnEmojis("ðŸ’—", 40);
    document.getElementById("modalTitle").textContent = "MÃ¼kemmel! ðŸ¥³";
    showModal();
}

function gameOver() {
    document.getElementById("modalTitle").textContent = `Kelime: ${TARGET_WORD}`;
    showModal();
}

function showModal() {
    setTimeout(() => {
        document.getElementById("modalEmojis").textContent = boardHistory.join("\n
